# Чат-бот для предоставления информации, помощи в обслуживании клиентов, проведения маркетинговых кампаний

Данный проект представляет собой чат-бота, разработанного с использованием современного стека технологий для автоматизации взаимодействия с клиентами, обработки заявок и проведения маркетинговых кампаний.

## Возможности

- Автоматизация общения с клиентами через Telegram.
- Обработка пользовательских запросов и предоставление ответов.
- Интеграция с базами данных для хранения информации.
- Уведомления по электронной почте через SMTP-сервер.
- Лёгкая настройка и масштабируемость.

## Стек технологий

- **Python**
- **Aiogram**: асинхронный Telegram Bot API фреймворк.
- **SQLAlchemy** и **Asyncpg**: для работы с базой данных.
- **Alembic**: миграции базы данных.
- **Pydantic**: для управления конфигурацией.
- **Aiosmtplib**: отправка писем через SMTP.
- **Black**: автоматическое форматирование кода.
- **Make**: автоматизация задач.

## Установка и запуск

### Шаги установки

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/Rxyalxrd/scid_bot_3.git
   cd scid_bot_3
   ```

2. Установите зависимости с использованием Poetry:
   ```bash
   poetry install
   ```

3. Настройте файл `.env` на основе примера `.env.example`:
   ```bash
   cp .env.example .env
   ```

4. Примените миграции базы данных:
   ```bash
   poetry run alembic upgrade head
   ```

5. Запустите бота:
   ```bash
   poetry run python bot.py
   ```

### Использование Docker (опционально)

1. Соберите Docker-образ:
   ```bash
   docker build -t scid_bot_3 .
   ```

2. Запустите контейнер:
   ```bash
   docker run --env-file .env scid_bot_3
   ```

## Тестирование

Проект содержит тесты для проверки функциональности. Для их запуска выполните:

```bash
poetry run pytest
```

## Структура проекта

- `bot/` — основной код бота.
- `alembic/` — миграции базы данных.
- `tests/` — тесты.
- `docker/` — файлы для сборки Docker-образов (если есть).

## Переменные окружения

В файле `.env` указываются параметры для настройки:

- `TELEGRAM_TOKEN`: токен для доступа к Telegram Bot API.
- `DATABASE_URL`: строка подключения к базе данных PostgreSQL.
- `SMTP_SERVER`, `SMTP_PORT`, `SMTP_USER`, `SMTP_PASSWORD`: настройки SMTP для отправки почты.

Заполните файл `.env` своими данными для корректной работы.

## Использование Makefile

Для удобства работы в проекте используется Makefile:

- `make run` — запуск бота.
- `make migrate` — применение миграций.
- `make test` — запуск тестов.
